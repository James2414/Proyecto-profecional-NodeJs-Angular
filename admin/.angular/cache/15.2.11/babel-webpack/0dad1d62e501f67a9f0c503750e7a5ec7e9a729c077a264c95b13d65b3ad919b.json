{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { GLOBAL } from 'src/app/services/GLOBAL';\nimport { v4 as uuidv4 } from 'uuid';\nlet ConfigComponent = class ConfigComponent {\n  constructor(_adminService) {\n    this._adminService = _adminService;\n    this.token = '';\n    this.config = {\n      titulo: '',\n      serie: '',\n      correlativo: '',\n      categorias: []\n    };\n    this.titulo_cat = '';\n    this.icono_cat = '';\n    this.token = localStorage.getItem('token');\n    this.token = localStorage.getItem('token') || '';\n    this.url = GLOBAL.url;\n    this._adminService.obtener_config_admin(this.token).subscribe(response => {\n      this.config = response.data;\n      this.imgSelect = this.url + 'obtener_logo/' + this.config.logo;\n      console.log(this.config);\n    }, error => {\n      console.log(error);\n    });\n  }\n  ngOnInit() {}\n  agregar_cat() {\n    if (this.titulo_cat && this.icono_cat) {\n      console.log(uuidv4());\n      this.config.categorias.push({\n        titulo: this.titulo_cat,\n        icono: this.icono_cat,\n        id: uuidv4() // ⇨ '9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d'\n      });\n      this.titulo_cat = '';\n      this.icono_cat = '';\n    } else {\n      iziToast.show({\n        title: 'ERROR',\n        titleColor: '#ff0000',\n        color: '#FFF',\n        class: 'text-danger',\n        position: 'topRight',\n        message: 'Debe ingresar un titulo e icono para la categoria'\n      });\n    }\n  }\n  actualizar(confForm) {\n    if (confForm.valid) {\n      let data = {\n        titulo: confForm.value.titulo,\n        serie: confForm.value.serie,\n        categorias: this.config.categorias,\n        correlativo: confForm.value.correlativo,\n        logo: this.file\n      };\n      console.log(data);\n      this._adminService.actualiza_config_admin(\"66cc981c30d993ee17e06be8\", data, this.token || '').subscribe(response => {\n        iziToast.show({\n          title: 'SUCCES',\n          titleColor: '#ff0000',\n          color: '#FFF',\n          class: 'text-danger',\n          position: 'topRight',\n          message: 'Se actualizo correctamente la configuracion.'\n        });\n      });\n    } else {\n      iziToast.show({\n        title: 'ERROR',\n        titleColor: '#ff0000',\n        color: '#FFF',\n        class: 'text-danger',\n        position: 'topRight',\n        message: 'Complete correctamente el formulario'\n      });\n    }\n  }\n  fileChangeEvent(event) {\n    if (event.target.files && event.target.files[0]) {\n      this.file = event.target.files[0];\n    } else {\n      iziToast.show({\n        title: 'ERROR NO ACCES',\n        titleColor: '#ff0000',\n        color: '#FFF',\n        class: 'text-danger',\n        position: 'topRight',\n        message: 'No IMAGE NO ACCES..'\n      });\n    }\n    // Validación de tamaño y tipo de archivo\n    if (this.file && this.file.size <= 4 * 1024 * 1024) {\n      if (this.file.type === 'image/png' || this.file.type === 'image/webp' || this.file.type === 'image/jpg' || this.file.type === 'image/gif' || this.file.type === 'image/jpeg') {\n        const reader = new FileReader();\n        reader.onload = e => this.imgSelect = reader.result;\n        console.log(this.imgSelect);\n        $('.cs-file-drop-icon').addClass('cs-file-drop-preview img-thumbnail rounded');\n        $('.cs-file-drop-icon').removeClass('cs-file-drop-icon cxi-upload');\n        reader.readAsDataURL(this.file);\n        $('#input-portada').text(this.file.name);\n        this.file = this.file;\n      } else {\n        iziToast.show({\n          title: 'ERROR',\n          titleColor: '#ff0000',\n          color: '#FFF',\n          class: 'text-danger',\n          position: 'topRight',\n          message: 'Solo se permiten imágenes en formato PNG, JPEG, JPG, GIF o WEBP'\n        });\n        $('#input-portada').text('seleccionar imagen');\n        this.imgSelect = 'assets/img/01.jpg';\n        this.file = undefined;\n      }\n    } else {\n      iziToast.show({\n        title: 'ERROR TAMANIO',\n        titleColor: '#ff0000',\n        color: '#FFF',\n        class: 'text-danger',\n        position: 'topRight',\n        message: 'La imagen es demasiado grande. Máximo 4MB'\n      });\n      $('#input-portada').text('seleccionar imagen');\n      this.imgSelect = 'assets/img/01.jpg';\n      this.file = undefined;\n    }\n    console.log(this.file);\n  }\n  ngDoCheck() {\n    $('.cs-file-drop-preview').html(\"<img src=\" + this.imgSelect + \">\");\n  }\n  eliminar_categoria(idx) {\n    this.config.categorias.splice(idx, 1);\n  }\n};\nConfigComponent = __decorate([Component({\n  selector: 'app-config',\n  templateUrl: './config.component.html',\n  styleUrls: ['./config.component.css']\n})], ConfigComponent);\nexport { ConfigComponent };","map":{"version":3,"names":["Component","GLOBAL","v4","uuidv4","ConfigComponent","constructor","_adminService","token","config","titulo","serie","correlativo","categorias","titulo_cat","icono_cat","localStorage","getItem","url","obtener_config_admin","subscribe","response","data","imgSelect","logo","console","log","error","ngOnInit","agregar_cat","push","icono","id","iziToast","show","title","titleColor","color","class","position","message","actualizar","confForm","valid","value","file","actualiza_config_admin","fileChangeEvent","event","target","files","size","type","reader","FileReader","onload","e","result","$","addClass","removeClass","readAsDataURL","text","name","undefined","ngDoCheck","html","eliminar_categoria","idx","splice","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\james\\Desktop\\onlineStoreee-tienda-angular-Node-js\\onlineStoreee\\admin\\src\\app\\components\\config\\config.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { AdminService } from 'src/app/services/admin.service';\nimport { GLOBAL } from 'src/app/services/GLOBAL';\nimport { v4 as uuidv4 } from 'uuid';\n\ndeclare var iziToast: any;\ndeclare var jQuery: any;\ndeclare var $: any;\n\n@Component({\n  selector: 'app-config',\n  templateUrl: './config.component.html',\n  styleUrls: ['./config.component.css']\n})\nexport class ConfigComponent implements OnInit {\n\n  public token: string | null = ''\n  public config: any = {\n    titulo: '',\n    serie: '',\n    correlativo: '',\n    categorias: []\n  };\n  \n  public file : File | undefined;\n  public titulo_cat = '';\n  public icono_cat = '';\n  public imgSelect: string | ArrayBuffer | null | undefined;\n  public url: string;\n\n  constructor(\n    private _adminService: AdminService\n  ) { \n    this.token = localStorage.getItem('token');\n    this.token = localStorage.getItem('token') || '';\n    this.url =GLOBAL.url;\n    this._adminService.obtener_config_admin(this.token).subscribe(\n      response=>{\n        this.config = response.data;\n        this.imgSelect = this.url+'obtener_logo/'+ this.config.logo\n        console.log(this.config);\n      },\n      error=>{\n        console.log(error);\n      }\n    )\n  }\n\n  ngOnInit(): void {\n\n  }\n\n  agregar_cat(){\n    if(this.titulo_cat && this.icono_cat){\n\n      console.log(uuidv4());\n      this.config.categorias.push({\n        titulo: this.titulo_cat,\n        icono: this.icono_cat,\n        id: uuidv4() // ⇨ '9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d'\n      });\n\n      this.titulo_cat = '';\n      this.icono_cat = '';\n\n    }else{\n      iziToast.show({\n        title: 'ERROR',\n        titleColor: '#ff0000',\n        color: '#FFF',\n        class: 'text-danger',\n        position: 'topRight',\n        message: 'Debe ingresar un titulo e icono para la categoria'\n      });\n    }\n  }\n\n  actualizar(confForm: NgForm){\n    if(confForm.valid){\n      let data = {\n        titulo: confForm.value.titulo,\n        serie: confForm.value.serie,\n        categorias: this.config.categorias,\n        correlativo: confForm.value.correlativo,\n        logo: this.file\n      }\n\n      console.log(data);\n      this._adminService.actualiza_config_admin(\"66cc981c30d993ee17e06be8\",data,this.token || '').subscribe(\n        response=>{\n          iziToast.show({\n            title: 'SUCCES',\n            titleColor: '#ff0000',\n            color: '#FFF',\n            class: 'text-danger',\n            position: 'topRight',\n            message: 'Se actualizo correctamente la configuracion.'\n          });\n        }\n      )\n\n    }else{\n      iziToast.show({\n        title: 'ERROR',\n        titleColor: '#ff0000',\n        color: '#FFF',\n        class: 'text-danger',\n        position: 'topRight',\n        message: 'Complete correctamente el formulario'\n      });\n    }\n  }\n\n  fileChangeEvent(event: any):void{\n    \n    \n    if (event.target.files && event.target.files[0]) {\n      this.file = <File>event.target.files[0];\n  } else {\n      iziToast.show({\n          title: 'ERROR NO ACCES',\n          titleColor: '#ff0000',\n          color: '#FFF',\n          class: 'text-danger',\n          position: 'topRight',\n          message: 'No IMAGE NO ACCES..'\n      });\n  }\n\n  // Validación de tamaño y tipo de archivo\n  if (this.file && this.file.size <= 4 * 1024 * 1024){\n    if(this.file.type === 'image/png' || \n       this.file.type === 'image/webp' || \n       this.file.type === 'image/jpg' || \n       this.file.type === 'image/gif' || \n       this.file.type === 'image/jpeg'){\n\n      const reader = new FileReader();\n      reader.onload = e => this.imgSelect = reader.result;\n      console.log(this.imgSelect);\n      \n        \n        $('.cs-file-drop-icon').addClass('cs-file-drop-preview img-thumbnail rounded')\n        $('.cs-file-drop-icon').removeClass('cs-file-drop-icon cxi-upload');\n\n      reader.readAsDataURL(this.file);\n\n      $('#input-portada').text(this.file.name)\n      this.file = this.file\n\n    } else {\n      iziToast.show({\n        title: 'ERROR',\n        titleColor: '#ff0000',\n        color: '#FFF',\n        class: 'text-danger',\n        position: 'topRight',\n        message: 'Solo se permiten imágenes en formato PNG, JPEG, JPG, GIF o WEBP'\n      });\n\n      $('#input-portada').text('seleccionar imagen');\n      this.imgSelect = 'assets/img/01.jpg';\n      this.file = undefined;\n\n    }\n  } else {\n    iziToast.show({\n      title: 'ERROR TAMANIO',\n      titleColor: '#ff0000',\n      color: '#FFF',\n      class: 'text-danger',\n      position: 'topRight',\n      message: 'La imagen es demasiado grande. Máximo 4MB'\n    });\n\n    $('#input-portada').text('seleccionar imagen')\n    this.imgSelect = 'assets/img/01.jpg';\n    this.file = undefined;\n\n  }\n  console.log(this.file)\n  }\n\n  ngDoCheck(): void {\n    $('.cs-file-drop-preview').html(\"<img src=\"+this.imgSelect+\">\")\n  }\n\n  eliminar_categoria(idx:number){\n    this.config.categorias.splice(idx, 1)\n  }\n\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}